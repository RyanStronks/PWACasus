<!DOCTYPE html>
<html lang="nl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Game Detail</title>
    <link rel="stylesheet" href="./styles.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script type="module">
      import { fetchGame, getGameImageUrl } from './api.js';

      function getIdFromUrl() {
        const params = new URLSearchParams(window.location.search);
        return params.get('id');
      }

      async function loadGameDetail() {
        const id = getIdFromUrl();
        const container = document.getElementById('game-detail');
        if (!id) {
          container.innerHTML =
            '<div class="p-8 text-red-400">No game ID provided.</div>';
          return;
        }
        container.innerHTML =
          '<div class="p-8 text-center text-zinc-300">Loading...</div>';
        try {
          const game = await fetchGame(id);
          container.innerHTML = `
            <div class="max-w-2xl mx-auto bg-gradient-to-bl from-white/30 via-white/10 to-purple-200/20 backdrop-blur-md shadow-lg rounded-3xl p-8 mt-10">
              <a href="index.html" class="text-purple-400 hover:underline flex items-center mb-6">
                <span class="material-icons mr-2">arrow_back</span>
                <span>Terug naar overzicht</span>
              </a>
              <div class="flex flex-col md:flex-row items-center gap-8">
                ${
                  game.image_path
                    ? `<img src="${getGameImageUrl(game.image_path)}" alt="${
                        game.name
                      }" class="w-48 h-48 object-cover rounded-xl shadow mb-4 md:mb-0" />`
                    : ''
                }
                <div class="flex-1 text-center md:text-left">
                  <h1 class="text-3xl font-bold mb-2 text-purple-900 dark:text-purple-200">${
                    game.name
                  }</h1>
                  <p class="mb-4 text-zinc-700 dark:text-zinc-300">${
                    game.description
                  }</p>
                </div>
              </div>
            </div>
          `;
        } catch (err) {
          container.innerHTML = `<div class="p-8 text-red-400">Failed to load game details.</div>`;
        }
      }

      document.addEventListener('DOMContentLoaded', loadGameDetail);
    </script>
  </head>
  <body
    class="bg-gradient-to-b from-white to-purple-100 dark:from-black dark:to-[#923CB5] min-h-screen"
  >
    <div id="game-detail"></div>
  </body>
</html>
